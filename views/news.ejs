<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Latest news from VNExpress. Stay updated with the latest headlines and articles.">
  <title>Tin t·ª©c - VNExpress</title>
  <link rel="stylesheet" href="/news-styles.css">
</head>
<body class="news-page">
  <!-- Header -->
  <header class="header">
    <div class="logo">
      <a href="/" class="logo-link">
        <img src="/images/logowebtintuc.png" alt="VNExpress Logo" class="logo-img">
      </a>
    </div>
    <nav class="navbar">
      <ul>
        <% if (session && session.user) { %>
          <li><a href="/auth/logout" class="navbar-link">ƒêƒÉng xu·∫•t</a></li>
          <% if (session.user.role === 'admin') { %>
            <li><a href="/auth/admin" class="navbar-link">Qu·∫£n l√Ω trang web</a></li>
          <% } %>
        <% } else { %>
          <li><a href="/auth/login" class="navbar-link">ƒêƒÉng Nh·∫≠p</a></li>
        <% } %>
        <li><a href="/news/saved" class="navbar-link">B√†i Vi·∫øt ƒê√£ L∆∞u</a></li>

        <li><a href="/news/about" class="navbar-link">Gi·ªõi Thi·ªáu</a></li>
        <li><a href="/news/contact" class="navbar-link">Li√™n H·ªá</a></li>
      </ul>
    </nav>
  </header>

  <!-- Banner -->
  <section class="top-banner">
    <h1 class="main-title">Tin T·ª©c M·ªõi Nh·∫•t</h1>
    <p class="subtitle">C·∫≠p nh·∫≠t th√¥ng tin n√≥ng h·ªïi, m·ªõi nh·∫•t t·ª´ VNEXPRESS</p>
  </section>

  <!-- Category Filter -->
  <section class="category-filter">
    <form method="get" action="/news">
      <select name="category" aria-label="Ch·ªçn danh m·ª•c tin t·ª©c">
        <option value="" <%= !category ? 'selected' : '' %>>T·∫•t c·∫£</option>
        <option value="giai-tri" <%= category === 'giai-tri' ? 'selected' : '' %>>üé≠ Gi·∫£i tr√≠</option>
        <option value="the-thao" <%= category === 'the-thao' ? 'selected' : '' %>>‚öΩ Th·ªÉ thao</option>
        <option value="phap-luat" <%= category === 'phap-luat' ? 'selected' : '' %>>‚öñÔ∏è Ph√°p lu·∫≠t</option>
        <option value="giao-duc" <%= category === 'giao-duc' ? 'selected' : '' %>>üìö Gi√°o d·ª•c</option>
        <option value="suc-khoe" <%= category === 'suc-khoe' ? 'selected' : '' %>>üíä S·ª©c kh·ªèe</option>
      </select>
      <button type="submit" aria-label="L·ªçc tin t·ª©c">L·ªçc</button>
    </form>
  </section>

   <!-- News Section -->
   <section class="news-container">
    <% if (newsData && newsData.length > 0) { %>
      <div class="news-grid">
        <% newsData.forEach(news => { %>
          <div class="news-card">
            <% if (news.image) { %>
              <img src="<%= news.image %>" alt="Image for <%= news.title %>" class="news-image">
            <% } else { %>
              <img src="/images/default-image.jpg" alt="Default Image" class="news-image">
            <% } %>
            <div class="news-details">
              <h3><a href="/news/details/<%= news.id %>" class="news-title"><%= news.title %></a></h3>
              <p class="news-description"><%= news.description %></p>
              <a href="/news/details/<%= news.id %>" class="read-more-btn">ƒê·ªçc th√™m</a>
              <% if (session && session.user) { %>
                <button class="save-news-btn" data-news-id="<%= news.id %>">L∆∞u b√†i vi·∫øt</button>
              <% } else { %>
                <button class="save-news-btn" disabled>L∆∞u b√†i vi·∫øt</button>
              <% } %>
            </div>
          </div>
        <% }) %>
      </div>

      <!-- Pagination -->
      <div class="pagination">
        <% if (prevPage) { %>
          <a href="/news?page=<%= prevPage %>&category=<%= category %>" class="pagination-btn">Tr∆∞·ªõc</a>
        <% } else { %>
          <span class="pagination-btn disabled">Tr∆∞·ªõc</span>
        <% } %>

        <% for (let i = 1; i <= totalPages; i++) { %>
          <% if (i === currentPage) { %>
            <span class="pagination-btn active"><%= i %></span>
          <% } else { %>
            <a href="/news?page=<%= i %>&category=<%= category %>" class="pagination-btn"><%= i %></a>
          <% } %>
        <% } %>

        <% if (nextPage) { %>
          <a href="/news?page=<%= nextPage %>&category=<%= category %>" class="pagination-btn">Sau</a>
        <% } else { %>
          <span class="pagination-btn disabled">Sau</span>
        <% } %>
      </div>
    <% } else { %>
      <p>Kh√¥ng c√≥ b√†i vi·∫øt n√†o trong danh m·ª•c n√†y.</p>
    <% } %>
  </section>

  <!-- Save News Script -->
  <script src="/saveNews.js"></script>
</body>
</html>